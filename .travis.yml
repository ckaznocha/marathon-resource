sudo: required
language: go
services:
- docker
env:
  global:
  - GOOS=linux
  - secure: W7Qvk4S08T+VmPcn/CfVcbZiSz8CRwwgdsu6v/KbDRYvmw68SAVgJAH4exdAFKVTVrA48cTzGdqcyRjUecT/fCbbxdXOMFvYxXHHmuLbiiTW92v7/oZySvEIyat+nK8eK4vWnQxkA/MFCgkSu0iiD6+uHV7bwi/GSNiZOj43zTPgIx4Z+an9MTG4tYpZhPYukC3MDRI+ZAaNs7j1rcN0WR3oOHsnXQJiMG5Fpk++FqgREgoObTDXRDYtEMdT7rCeqSD4N7jY+sFeywti2e/rrIDpMJ6jMyGFW8YuHHJKdFiYWcF2ncUF2Sywtw94d9NgoA1GO3K3GauOzwujQFA0PM4DcUcvi06mSpvOhN1HLEeDzo5Zn9IM0acQ6/pP8OM5GuxopGEVyrbkz55XBjTgz49wls6FiPfPplPPNvvfa5lqQgh2IWl7GNk1LZQj+eN6+oEpPbkyJBd/Vlv4RPIHlhgEYI1v0qIdGD6QwklRRruViWpDN1o2zag/BYIDF/LzIsUSyup4bZREYxmTvzDFGTKDTOffwmrJ+0xq+xddjX+dTKkPvogBmykRXi5Mt6RpNVjOZ1rWO3dcB+wlhqbAJV4Cs8BHwCyTNTL/9DFjEYfaJPGDaJ1J9Xb7+RD/WU4swecof0zD9N/YJkT/JKmDCmutX5Mfnz6y6iS+SJsbgOM=
  - secure: N1mk4op6xo7vN44qwU3ya7j7buhfrY8Arxrm4OfPNqwji0Qi86x8v/IkovuIB2UeUXP+WMW4J5w/lSluczrCW6ApkzGKluVp7YULGUdY5RZDNxekUiMGi1ydOJ7YLZAx4lVBL4sjywNjFI6i2XgB4d5yP3a+tgEFgeVRBS/S3kHcKerY9A2lA39myE5/tRHuXbB/xDZiQg4iU8T3dNIQrDeZf9AjwYV5G/N0L8nFRItH54bq5lwPzh6i+dN29rURUqGyMjV79sM6vrMcWZm5lkbFgB85zIo6uMeTTL8o/BjcZiYbrNV7kVBrrqCCRT+QuG5h3TVtt10kTTenNGNxyJOQnlqravcmGOnYxdu9RnAhILwtLNIDAqkpILNepsXq6nAcBSLdOSnNlQOB8NvJ7N0DswGhlsoxOFWEBpW3S4/19VMYwbBO8yNocsvOlbBjX0HuhHWv5TXksE3BaRH3MvqM4InozG9PLppFYCfY7+vSORG+OF4m4EII8l1/RF0GLcBtowx0nScAFPjXxS0ETHVqM622uwv1m5cE24UBEGO0zEkWDXIh2LvYLOT9gRn7AtJrSwiL6P6W4+q76suueCuo+hL3S+9iMSiee+KcCjrK4j3jGWUkNZ9UW2Dm4pleOnNuPjFCfFnWs39H15B0TV/0/TVqgqGeDnHwRsrU174=
  - secure: EjivCNjuVmJ7W+tuPQHT9FyNOGyweXJBlbL3Kz9Gd+lvLnzowKLnU+DMM6DQ3Tppru4hbz+kGoZj9612Xs5wSY45jIN+PLsWErC6R1oopTbAdDidrg93xDbDXk/YizdlvuBXcWXsBdPck4pPMwg7eFcNp6RnmvdO+pdX69dg+1R27NlXWsp2Restpcd0hvv5OGuewrdxbPwX48gkCsT7QM9gY+XbSo3QAaoL0dZQXrzDRqhRYKe3/fd2Md21MQbee51LU7H9k5c98aIg7lKNvBM+WxbiUQhp7DzQj5U/+u/BlAmNpQJ+G7f32Tc/F68wOya0hFmtNVG3h8Q4OwG3xYdGcWg9EUMB3uLn37Z+SMRR+Nud1y7BQFyOeveLPBn+dUepPF9Wv2b9F0zhAWhuV5g+aEnAYbXWQMOEzrIwMl6x/bzUwf/z7TVbCzE5p6fF+VvpLu7qU4Tp09gSoaVWu+zGWPKEPZInSARVYnt2Opyd+ZDOcYLZWnaTNlsj3YaqXUNJapjh3u1jUCv4V4OTvkGOb5P5mh3XFqemAuIoWIeewucoMoLxp+S7SCUH9V8nHvqYdKF+54/J96Hgk08Idjr+JI4QoJUkCu5bShwKq7MyI09a0dnnwwPkosqMN0CtEP9CZ3AEbaYrGX51xKui3Zigwvb0MhOuOoxiGmEaKOk=
before_install:
- go get github.com/maruel/pre-commit-go/cmd/pcg
script:
- pcg installrun -m all -a
- go build -a -o ./ci/marathon-resource ./cmd/marathon-resource
notifications:
  slack:
    secure: yksF8NmA66wYJwSqyLf40AaFMxR1b4CvmRFfPsFzy1BfIn6OOgypck46iKce3r2dzD3ERkazOfo+Q1M0nLFEzJclOuuwdwEb4QuPEHnghP13h487abEx7tEvigk6b/N3BjOnmQ4ZE9NtLHweNKhU/ZyV1yajlQfpOBvYAcuz30SKCZZBWehYOahAi6LYsKfOYs9TPhHhqdCm1/kTjgxcIu1ZlfgnP1zIn1jx8MiNlmTeJKsdgCPo9bjcA1JnOa/5krYi83gEw0+Bf0wQznt1c+yWAhCAiNHXr04jWJXdm8u1lwzP5nUFxKE4XRiKbbfSNEcwqshwycLJlyAfEu7F+Mzh3u/veebYg9ysw57cJUm8GyEllqlpRF1J5TuMxObG6VLHct/eOlU2btLhqkzeyO4APAaBywv0UN3Ml7k+gj3RBIcfCj1ATRO+RkqQ54oc6tyka+JhP2z5ip3OJbfDmZPjhGLOlQ34v55roqqjn4Ckm5pBvV0Whu/SmPreFT1nDLTIYW30R59oO9vydUMFNoCfG5qobdSpEycBVnkvu/1OxNt/3w1RotDcAYhPzy107uvk+UL6hB/pfjiV2xpKRr5m5J13w7F6KNySJNBvPzYbszWJl0a5MBTiDStnjp+OB6fQN9CAy337Bhkbhc8s8isZmrs8A4rdGJHFjDP0/jc=
after_success:
- if [ -n "$TRAVIS_TAG" ]; then
  docker login -e="$DOCKER_EMAIL" -u="$DOCKER_USERNAME" -p="$DOCKER_PASSWORD";
  docker build -t $TRAVIS_REPO_SLUG:$TRAVIS_TAG ./ci/.;
  docker tag $TRAVIS_REPO_SLUG:$TRAVIS_TAG $TRAVIS_REPO_SLUG:latest;
  docker push $TRAVIS_REPO_SLUG:$TRAVIS_TAG;
  fi
